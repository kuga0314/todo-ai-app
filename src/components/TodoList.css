/* src/components/TodoList.css */

/* 操作エリア */
.list-controls {
  display: flex;
  flex-wrap: wrap;
  gap: .75rem;
  margin-bottom: 1rem;
  align-items: flex-start; /* ← 折り返し時に潰れない */
  justify-content: space-between;
}

.filter-row { display: flex; gap: .5rem; flex-wrap: wrap; }

.list-toolbar {
  position: sticky;
  top: 0;
  z-index: 5;
  padding: 8px 0;
  background: var(--card-bg, #ffffff);
  border-bottom: 1px solid var(--border, #e2e8f0);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.04);
  backdrop-filter: saturate(160%) blur(6px);
}

.btn-mini {
  padding: .35rem .75rem;
  border-radius: 8px;
  border: 1px solid var(--border, #e2e8f0);
  background: var(--surface, #f1f5f9);
  font-size: .85rem;
  font-weight: 700;
  cursor: pointer;
  transition: background .15s ease, box-shadow .15s ease;
  color: var(--text, #0f172a);
}
.btn-mini:hover { background: var(--surface-strong, #e2e8f0); }
.btn-mini:disabled { opacity: .55; cursor: not-allowed; }
.btn-ghost { background: var(--surface-strong, #e2e8f0); }
.btn-ghost:hover { background: var(--surface, #f1f5f9); }

.filter-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-size: .78rem;
  color: var(--muted, #475569);
}

.filter-group label {
  font-weight: 600;
}

.filter-select {
  padding: .4rem .6rem;
  border-radius: 8px;
  border: 1px solid var(--border, #e2e8f0);
  font-size: .85rem;
  background: var(--surface, #f1f5f9);
  cursor: pointer;
  min-width: 150px;          /* ← つぶれ防止 */
  color: var(--text, #0f172a);
}
.filter-select--label { min-width: 170px; }

.filter-input {
  width: 86px;
  padding: .35rem .5rem;
  border-radius: 8px;
  border: 1px solid var(--border, #e2e8f0);
  font-size: .85rem;
  background: var(--surface, #f1f5f9);
  color: var(--text, #0f172a);
}

.range-inputs {
  display: flex;
  align-items: center;
  gap: .35rem;
}

.range-separator {
  color: var(--muted, #475569);
  font-weight: 600;
}

.filter-reset {
  align-self: flex-end;
  padding: .35rem .75rem;
  border-radius: 999px;
  background: var(--surface-strong, #e2e8f0);
  border: none;
  font-weight: 600;
  cursor: pointer;
  color: var(--text, #0f172a);
}
.filter-reset:hover {
  background: var(--surface, #f1f5f9);
}

/* セグメントボタン */
.segmented {
  display: inline-flex;
  padding: 4px;
  background: var(--surface-strong, #e2e8f0);
  border-radius: 999px;
  box-shadow: inset 0 0 0 1px var(--border, #e2e8f0);
}
.seg-btn {
  appearance: none;
  border: none;
  background: transparent;
  padding: .4rem .9rem;
  font-weight: 600;
  font-size: .9rem;
  border-radius: 999px;
  color: var(--muted, #475569);
  cursor: pointer;
}
.seg-btn:hover { background: var(--surface, #f1f5f9); }
.seg-btn.is-active { background: var(--card-bg, #ffffff); color: var(--text, #0f172a); box-shadow:0 1px 2px rgba(0,0,0,.08); }

/* 未完のみスイッチ */
.switch { display:inline-flex; align-items:center; gap:.5rem; cursor:pointer; }
.switch input { position:absolute; opacity:0; }
.switch-track {
  width:40px; height:20px; background:var(--border, #e2e8f0); border-radius:999px; position:relative;
}
.switch-track::after {
  content:""; position:absolute; top:3px; left:3px; width:14px; height:14px;
  background:var(--card-bg, #ffffff); border-radius:999px; box-shadow:0 1px 2px rgba(0,0,0,.2);
  transition: transform .2s ease;
}
.switch input:checked + .switch-track { background: var(--primary); }
.switch input:checked + .switch-track::after { transform: translateX(20px); }
.switch-label { font-weight:600; color:var(--text, #0f172a); }

/* リスト/カード */
.list { list-style:none; padding:0; margin:0; }
.todo-item {
  background: var(--card-bg);
  border-radius: var(--r-lg);
  box-shadow: var(--shadow-sm);
  padding: .8rem 1rem;
  margin-bottom: .75rem;
  display:flex;
  justify-content: space-between;
  align-items:flex-start;
  border: 2px solid transparent;   /* ラベル色で上書き */
  transition: border-color .18s ease, background-color .18s ease;
  color: var(--text, #0f172a);
}
.todo-item:hover { border-color: var(--border, #e2e8f0); background: var(--surface, #f1f5f9); }

.todo-content { flex:1; }
.todo-main { display:flex; align-items:center; gap:.5rem; }
.todo-title { font-size:1rem; font-weight:800; color: var(--text, #0f172a); }
.todo-title.is-done { text-decoration:line-through; color: var(--muted, #475569); }

/* ラベルチップ */
.label-chip {
  display: inline-block;
  padding: 2px 8px;
  font-size: .75rem;
  font-weight: 700;
  color: #fff;
  border-radius: 999px;
  line-height: 1.2;
  transform: translateY(-1px);
}

/* メタ行 */
.meta-lines { margin-top:.5rem; display:flex; flex-direction:column; gap:.25rem; }
.meta-line {
  display:flex; align-items:center; gap:.5rem;
  font-size:.88rem; color:var(--text, #0f172a); flex-wrap:wrap;
}
.meta-line--edit { gap:.65rem; align-items:flex-start; }
.edit-input {
  padding: .35rem .5rem;
  border-radius: 8px;
  border: 1px solid var(--border, #e2e8f0);
  font-size: .9rem;
  background: var(--surface, #f1f5f9);
  color: var(--text, #0f172a);
}
.meta-line--plan {
  background:var(--surface, #f1f5f9);
  padding:4px 8px;
  border-radius:6px;
}
.meta-label { color:var(--muted, #475569); font-weight:600; }
.meta-value { font-weight:700; color: var(--text, #0f172a); }
.note { color:#0ea5e9; }
.spacer { flex: 0 0 12px; }

.plan-check { display:inline-flex; align-items:center; gap:6px; font-weight:700; color: var(--text, #0f172a); }
.plan-check input { width:18px; height:18px; }

.text-red-600 { color:#dc2626; }

/* Calendar task modal animations */
.task-modal-overlay {
  animation: fadeOverlay .16s ease-out;
}

.task-modal-card {
  animation: fadeCard .22s ease-out;
  transform-origin: center;
}

@keyframes fadeOverlay {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeCard {
  from {
    opacity: 0;
    transform: translateY(8px) scale(.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* バッジ */
.badge { display:inline-block; padding:2px 8px; border-radius:999px; font-size:12px; font-weight:700; color:#fff; }
.badge-priority-1 { background:#16a34a; }
.badge-priority-2 { background:#f59e0b; }
.badge-priority-3 { background:#dc2626; }
.badge-scale-1,
.badge-scale-2,
.badge-scale-3,
.badge-scale-4,
.badge-scale-5 { background: var(--primary); }

/* アクション */
.icon-btn { border:none; background:transparent; cursor:pointer; font-size:16px; padding:.25rem .35rem; border-radius:6px; align-self:flex-start; }
.icon-btn:hover { background: var(--surface-strong, #e2e8f0); }
.delete-btn { color:#dc2626; }
.delete-btn:hover { background:rgba(220,38,38,0.12); }

/* モバイル */
@media (max-width: 820px) {
  .meta-line { font-size:.84rem; }
}

@media (max-width: 900px) {
  .list-controls {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }

  .filter-row { width: 100%; }

  .filter-group { width: 100%; }

  .filter-select {
    width: 100%;
    min-width: 0;
  }

  .range-inputs { width: 100%; }

  .filter-input {
    width: 100%;
    max-width: 140px;
  }
}

@media (max-width: 720px) {
  .list-scroll {
    max-height: none !important;
    overflow: visible;
    padding-right: 0;
  }

  .list-toolbar {
    padding: 6px 0 10px;
  }

  .todo-item {
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
  }

  .todo-main { align-items: flex-start; }

  .meta-lines { gap: .35rem; }

  .meta-line {
    align-items: flex-start;
    gap: .4rem;
  }

  .meta-line .spacer { display: none; }

  .edit-input { width: 100%; max-width: 260px; }

  .plan-check input { width: 20px; height: 20px; }

  .icon-btn { align-self: flex-end; }

  .filter-row { gap: .75rem; }
}
